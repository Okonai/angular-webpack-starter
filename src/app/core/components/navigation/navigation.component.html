<nav class="c-main-menu">
    <span class="c-main-menu__button" (click)="toggleMenu()" (mouseenter) ="openMenu()" (mouseleave) ="closeMenu()"><span>Termék kínálat</span></span>
    <span class="c-main-menu__allcategory" routerLinkActive="active-link" routerLink="/minden-kategoria">Összes</span>
    <div class="c-main-menu__wrapper" (mouseenter) ="openMenu()" [ngClass]="{'open': (menuOpened$ | async) === true}">
        <ng-container *ngIf="root$ | async as root">
            <ng-container *ngIf="root&&root[0]">
                <ul *ngFor="let root of root$ | async" (click)="closeMenu()" (mouseleave) ="closeMenu()"> 
                    <li *ngFor="let level1 of root.children" [ngClass]="{'icon': level1.children!==undefined}">
                        <span>
                            <a routerLink="{{level1.slug}}-c{{level1.id}}" >{{level1.name}}</a>                            
                            <div class="sublevel-arrow" (click)="openSubLevel($event)"></div>
                        </span>
                        <ul class="subLevel">                            
                            <li (click)="closeSubLevel($event)" class="closeSubPanel"><span><a>Vissza</a></span></li>
                            <li *ngFor="let level2 of level1.children" [ngClass]="{'icon': level2.children!==undefined}">
                                <span>
                                    <a routerLink="{{level2.slug}}-c{{level2.id}}" >{{level2.name}}</a>                                    
                                    <div class="sublevel-arrow" (click)="openSubLevel($event)"></div>
                                </span>
                                <ul class="subLevel">
                                    <li (click)="closeSubLevel($event)" class="closeSubPanel"><span><a>Vissza</a></span></li>
                                    <li *ngFor="let level3 of level2.children" [ngClass]="{'icon': level3.children!==undefined}">
                                        <span>
                                            <a routerLink="{{level3.slug}}-c{{level3.id}}" >{{level3.name}}</a>
                                            <div class="sublevel-arrow" (click)="openSubLevel($event)"></div>
                                        </span>                                        
                                        <ul class="subLevel">
                                            <li (click)="closeSubLevel($event)" class="closeSubPanel"><span><a>Vissza</a></span></li>
                                            <li *ngFor="let level4 of level3.children">
                                                <span>
                                                    <a routerLink="{{level4.slug}}-c{{level4.id}}" >{{level4.name}}</a>
                                                </span>
                                            </li>                                            
                                        </ul>
                                    </li>
                                    
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </ng-container>
        </ng-container>
    </div>
</nav>